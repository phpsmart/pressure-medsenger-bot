<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<body>

<div id="ADDiv" style="width: 100%;"></div>


<script>
    function getRandom(min, max) {
        return Math.random() * (max - min) + min;
    }

    var trace1 = {
        x: {{end_dates|safe}},
        y: [{{l_level}},{{l_level}}],
        fill:'tonexty',
        type: 'scatter',
        mode: 'lines',
        line: {color:'#F2734C'},
        opacity: 0,
        name: 'Опасный уровень',
    };
    var trace2 = {
        x: {{end_dates|safe}},
        y: [{{u_level}},{{u_level}}],
        fill:'tonexty',
        mode: 'lines',
        type: 'scatter',
        line: {color:'#F2734C'},
        opacity: 0,
        name: 'Опасный уровень',
    };



    var adtrace1 = {
      x: {{ times|safe }},
      y: {{ AD1| safe }},
      name: 'Верхнее давление',
      type: 'scatter'
    };
    var adtrace2 = {
      x: {{ times| safe }},
      y: {{ AD2 | safe }},
      name: 'Нижнее давление',
      type: 'scatter'
    };
    var data = [trace1, trace2, adtrace1, adtrace2];
    var mmargin = {l: 0,r: 4, pad: 0};
    var mlegend = {
    orientation: 'h', traceorder: 'reversed', x: -.1, y: 1.2 };
    var layout = {showlegend: true, legend: mlegend, margin: mmargin};
    setTimeout(function () {
        Plotly.newPlot('ADDiv', data, layout);
    }, 1500)
</script>
</body>
</html>